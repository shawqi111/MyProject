<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sachkunde 34a Übungen</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

	<style>


body {

	margin-right: 270px; /* تحديد المسافة التي ترغب فيها لعنصر الجدول على اليمين */
}
.table-container {
	position: fixed;
	top: 5px; /* تحديد الارتفاع الجديد من الأعلى */
	right: 0;
	bottom: 0;
	width: 250px;
	margin-left: auto; /* دفع الجدول إلى اليمين */
	overflow-y: auto; /* تمكين التمرير العمودي */
	max-height: calc(100vh - 70px); /* تحديد ارتفاع أقصى للجدول بعد التقليل من الأعلى */
}

header#title-bar {

	background-color: #8992e9; /* لون الخلفية */
	color: #fff; /* لون النص */
	padding: 10px; /* هوامش داخلية للتباعد */
	text-align: center; /* محاذاة النص في وسط الشريط */
	width: 100%; /* العرض الكامل للشريط */
	z-index: 1000; /* للتأكد من أن الشريط يتم عرضه فوق أي عناصر أخرى */
}



header#title-bar h1 {
	font-size: 20px; /* يمكنك تعديل هذه القيمة حسب الحجم المطلوب */
	width: 100%;
}




header#Button-bar {
	background-color: #8992e9; /* لون الخلفية */
	color: #fff; /* لون النص */
	padding: 10px; /* هوامش داخلية للتباعد */
	text-align: center; /* محاذاة النص في وسط الشريط */
	width: 100%; /* العرض الكامل للشريط */
	height: auto; /* ارتفاع تلقائي */
	z-index: 999; /* ضع قيمة z-index أقل ليظهر تحت الشريط العلوي */
}


         	.labelIndex {
	text-align: right;
	display: inline-block;
/* تحديد محاذاة النص إلى اليسار */
}
  	 
   	 

.button-box {

	display: flex;
	flex-direction: column;
	align-items: center;
	border: 2px solid black;
	padding: 5px;
	background-color: #ccc;
	margin: auto; /* توسيط أفقي */
}


    	#button-container {

        	display: flex;
        	flex-direction: column;
        	gap: 5px; /* المسافة بين الأزرار داخل button-container */
        	padding: 30px;
        	width: 100%;
        	position: relative; /* تحديد العنصر كموضع نسبي */
    	}
    	#button-container button {
        	width: 100%;
        	background-color: #0603aa;
        	color: #ffffff;
        	font-size: 20px;
        	height: 150%;
       	 
                	}
    	#button-container label {
        	display: flex;
        	width: 100%;
        	justify-content: center;
        	font-size: 25px;
        	font-weight: bold;
        	height: 150%;

    	}

    	table {
			width: auto;
        	background-color: #000003;
        	gap: 50px;
    	}

    	#button-container label:first-child {
	background-color: rgb(248, 223, 223); /* تغيير لون الخلفية */
	color: rgb(2, 0, 0); /* تغيير لون النص */
	font-weight: bold; /* تغيير الوزن */
	justify-content: center;
	display: flex;

}


    	.first-item-wrapper {
        	margin-top: -20px; /* رفع العنصر الأول إلى الأعلى بقيمة سالبة */
    	}

    	#label1 {
        	display: none;

        	margin-top: 40px;
        	font-size: 24px;
        	font-weight: bold;
            display: flex;
  align-items: center;
    justify-content: center
    	}
    	#label5 {
        	margin-top: 40px;
        	font-size: 18px;
        	font-weight: bold;
    	}
    	#list {
        	display: none;
    	}
    	#next-buttons {
	display: flex;
	gap: 20px;
	margin-top: 10px; /* إضافة مسافة بادئة من أعلى الأزرار */
	align-items: center;
	justify-content: center
}

#check-button {
	margin-top: 10px; /* إضافة مسافة بادئة من أعلى الأزرار */
}

.container {
	margin: 10px auto 20px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	padding: 0px;
	width: 80%;
	gap: 0px;
	display: none; /* تحديد العنصر كعنصر Flexbox */
}


  .subject {
	margin-top: 10px; /* تحديد هامش علوي لتجنب تغطية العنوان */
}

  .subject h3 {
	margin-bottom: 5px;
  }
  .bar-container {
	background-color: #f0f0f0;
	border-radius: 5px;
	padding: 5px;
	position: relative;
  }
  .bar {
	background-color: #4caf50;
	height: 20px;
	border-radius: 5px;
	position: relative;
  }
  .percentage {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	color: white;
	font-weight: bold;
  }
  #resultsContainer {
	flex-direction: column;
	gap: 0px; /* تثليل التباعد بين العناصر بمقدار 10 بيكسل */
}



    	.table-container table {
        	border-collapse: collapse;
        	width: 100%;
    	}
    	.table-container th, .table-container td {
        	border: 1px solid black;
        	padding: 0; /* تخفيض التباعد داخل الخلية */
    	}
    	.table-container button {
    height: 50px;
    width: 100%;
    padding: 10px 20px;
    overflow: hidden;
    text-overflow: ellipsis; /* لوضع نقط الانقطاع في حال تم قص النص */
    display: -webkit-box;
    -webkit-line-clamp: 2; /* عدد الأسطر التي يتم عرضها */
    -webkit-box-orient: vertical;
}



		#finalResultText {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center; /* توسيط النص داخل العنصر */
    gap: 20px;
    margin-top: 10px;
}



   #label40,
#label50,
#label60,
#label70,
#label80 {
    display: none;
}
#countdown-timer {
width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center; /* توسيط النص داخل العنصر */
    gap: 20px;
    margin-top: 10px;
	color: rgb(96, 10, 182); /* تغيير لون النص */

}
#Pro

 {
    display: none;
}

#labelIndex
 {
    display: none;
}
#list2
 {
    display: none;
}

#next {
    display: flex;
    justify-content: center; /* توسيط العناصر */
    align-items: center; /* توسيط العناصر */
    background-color: #590ee4; /* لون خلفية العنصر */
    border-radius: 10px; /* زوايا مستديرة */
    padding: 10px; /* هامش داخلي */
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); /* ظل */
    color: #fffdfd; /* لون النص */
    font-size: 18px; /* حجم الخط */
	width: 100%;
}
#back {
    display: flex;
    justify-content: center; /* توسيط العناصر */
    align-items: center; /* توسيط العناصر */
    background-color: #590ee4; /* لون خلفية العنصر */
    border-radius: 10px; /* زوايا مستديرة */
    padding: 10px; /* هامش داخلي */
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); /* ظل */
    color: #fffdfd; /* لون النص */
    font-size: 18px; /* حجم الخط */
	width: 100%;
}

#checkAnswers {
    display: flex;
    justify-content: center; /* توسيط العناصر */
    align-items: center; /* توسيط العناصر */
    background-color: #0ee480; /* لون خلفية العنصر */
    border-radius: 10px; /* زوايا مستديرة */
    padding: 10px; /* هامش داخلي */
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); /* ظل */
    color: #fffdfd; /* لون النص */
    font-size: 18px; /* حجم الخط */
	width: 100%;
}

#Punkte {
display: flex;
    flex-grow: 1; /* يمتد لملء المساحة المتبقية */
    text-align: left; /* محاذاة النص إلى اليسار */
}

#Home {
display: flex;
    flex-grow: 1; /* يمتد لملء المساحة المتبقية */
    text-align: right; /* محاذاة النص إلى اليمين */
	background-color: #0603aa;
	color: #ffffff;
}
#footer {
        color: rgb(15, 46, 223);
        text-align: center;
        padding: 10px 0;
        left: 0;
        bottom: 0;
        width: 100%;
    }

	
	</style>
   
 
</head>

<body>
	<header id="title-bar">
    	<h1>عنوان الصفحة</h1>
		
   	
	</header>
	<header id="Button-bar" class="translate-exclude1" style="display: flex; justify-content: center;">
       
            <button id="listenButton">Hören</button>
            <button id="showResults">Prüfung abgeben</button>
        
    </header>
    
	
    
    <div>
        <button id="Home" style="float: left;" class="translate-exclude">Home</button>
        <label id="Punkte" style="float: right;" class="translate-exclude">Punkte</label>
    </div>
    <div id="google_translate_element" style="display: flex; gap: 10px; align-items: center;">
	</div>
    
    
    <div id="finalResultText" class="translate-exclude">
    </div>
    <div id="countdown-timer" class="translate-exclude">
    </div>
   <div class="container" id="resultsContainer" style="flex-direction: column; width: 80%;">
    	<div class="subject">
        	<h3 id="subjectTitle">الموضوع الأول (0 من 8)</h3>
        	<div class="bar-container">
            	<div id="progressBar" class="bar green" style="width: 80%;">
                	<span id="percentage" class="percentage">0%</span>
            	</div>
        	</div>
    	</div>
	</div>
    
	<div class="container" id="resultsContainer2" style="flex-direction: column; width: 80%;">
    	<div class="subject">
        	<h3 id="subjectTitle2">الموضوع الثاني (0 من 4)</h3>
        	<div class="bar-container">
            	<div id="progressBar2" class="bar green" style="width: 80%;">
                	<span id="percentage2" class="percentage">0%</span>
            	</div>
        	</div>
    	</div>
	</div>
</div>

<div class="container" id="resultsContainer3" style="flex-direction: column; width: 80%;">
<div class="subject">
	<h3 id="subjectTitle3">الموضوع الثالث (0 من 4)</h3>
	<div class="bar-container">
    	<div id="progressBar3" class="bar green" style="width: 80%;">
        	<span id="percentage3" class="percentage">0%</span>
    	</div>
	</div>
</div>
</div>
</div>
    
<div class="container" id="resultsContainer4" style="flex-direction: column; width: 80%;">
<div class="subject">
	<h3 id="subjectTitle4">الموضوع الرايع (0 من 24)</h3>
	<div class="bar-container">
    	<div id="progressBar4" class="bar green" style="width: 80%;">
        	<span id="percentage4" class="percentage">0%</span>
    	</div>
	</div>
</div>
</div>
</div>

<div class="container" id="resultsContainer5" style="flex-direction: column; width: 80%;">
	<div class="subject">
        <h3 id="subjectTitle5">الموضوع الرايع (0 من 24)</h3>
    	<div class="bar-container">
        	<div id="progressBar5" class="bar green" style="width: 80%;">
            	<span id="percentage5" class="percentage">0%</span>
        	</div>
    	</div>
	</div>
	</div>
	</div>
    
	<!-- Resul6 Unfallverhütungsvorschrift -->
<div class="container" id="resultsContainer6" style="flex-direction: column; width: 80%;">
	<div class="subject">
        <h3 id="subjectTitle6">الموضوع الرايع (0 من 24)</h3>
    	<div class="bar-container">
        	<div id="progressBar6" class="bar green" style="width: 0%;">
            	<span id="percentage6" class="percentage">0%</span>
        	</div>
    	</div>
	</div>
</div>

<!-- Waffenrecht -->
<div class="container" id="resultsContainer7" style="flex-direction: column; width: 80%;">
	<div class="subject">
        <h3 id="subjectTitle7">الموضوع الرايع (0 من 24)</h3>
    	<div class="bar-container">
        	<div id="progressBar7" class="bar green" style="width: 0%;">
            	<span id="percentage7" class="percentage">0%</span>
        	</div>
    	</div>
	</div>
</div>

<!-- Umgang mit Menschen -->
<div class="container" id="resultsContainer8" style="flex-direction: column; width: 80%;">
	<div class="subject">
        <h3 id="subjectTitle8">الموضوع الرايع (0 من 24)</h3>
    	<div class="bar-container">
        	<div id="progressBar8" class="bar green" style="width: 0%;">
            	<span id="percentage8" class="percentage">0%</span>
        	</div>
    	</div>
	</div>
</div>

<!-- Sicherheitstechnik -->
<div class="container" id="resultsContainer9" style="flex-direction: column; width: 80%;">
	<div class="subject">
        <h3 id="subjectTitle9">الموضوع الرايع (0 من 24)</h3>
    	<div class="bar-container">
        	<div id="progressBar9" class="bar green" style="width: 0%;">
            	<span id="percentage9" class="percentage">0%</span>
        	</div>
    	</div>
	</div>
</div>

   
	
 
    
	<div>
    	<ul id="list2"></ul>
  
	<div class="button-box">
    	<div id="button-container"></div>
	</div>
	<div>
    	<label id="label1"></label>
   	<label id="labelIndex">Index</label>

        	 
	</div>
	<div>
    	<label id="label5"></label>
    	<div id="next-buttons">
        	<button id="back">Zurück</button>
        	<button id="checkAnswers">Beantworten</button>
        	
        	<button id="next">Weiter</button>
    	</div>

    	
 <button id="Pro">Pro</button>

    
	<div>
    	<ul id="list"></ul>
	</div>
	<div class="table-container">
  	<table class="first-table">
      	<thead>
          	<tr>
              	<th>عنصر</th>
          	</tr>
      	</thead>
      	<tbody id="table-body">
          	<!-- بيانات الجدول ستتم إضافتها هنا باستخدام JavaScript -->
      	</tbody>
  	</table>
  </div>
 
	 

  <label id="label40">label40</label>
       	 
  <label id="label50">Iabel50</label>
  	 
  <label id="label60">Iabel60</label>
  	 
  <label id="label70">Iabel70</label>
 
  <label id="label80">Iabel80</label>


  <div id="footer">
	All rights reserved 2024
</div>


    <script>      
	
	function loadGoogleTranslate() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  // استدعاء تحميل عنصر الترجمة فور تحميل الصفحة
  window.onload = loadGoogleTranslate;

  // تعريف دالة googleTranslateElementInit لتكوين عنصر الترجمة
  function googleTranslateElementInit() {
    new google.translate.TranslateElement(
      {
        pageLanguage: 'de',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
        exclude: ['.translate-exclude'] // استثناء العناصر التي تحمل الفئة translate-exclude
      },
      'google_translate_element'
    );
  }  





var tableContainer = document.querySelector('.table-container');
var body = document.body;

// التحقق إذا كان عرض الشاشة أقل من الحد المحدد (في هذه الحالة 600 بكسل)
if (window.innerWidth < 600) {
    // تعديل الخصائص CSS
    tableContainer.style.position = 'static';
    body.style.marginRight = '0'; 
	document.body.style.paddingRight = '0';
    document.body.style.paddingLeft = '0';
	document.body.style.width = '100%';

} else {
    // في حالة عدم تحقق الشرط، عادة ما يكون العرض أكبر من 600 بكسل، لذلك نعيد تعيين الخصائص الأصلية
    tableContainer.style.position = 'fixed';
    body.style.marginRight = '270px';
}






	if (!localStorage.getItem('userId')) {
        // إعادة توجيه المستخدم إلى صفحة تسجيل الدخول
        window.location.href = 'index.html';
    }
	
	window.addEventListener('resize', function() {
    if (window.innerWidth < 768) {
        // تحديد تصميم الهاتف المحمول هنا
        console.log('تم تحديد تصميم الهاتف المحمول');
    } else if (window.innerWidth >= 768 && window.innerWidth < 1024) {
        // تحديد تصميم الجهاز اللوحي هنا
        console.log('تم تحديد تصميم الجهاز اللوحي');
    } else {
        // تحديد تصميم سطح المكتب هنا
        console.log('تم تحديد تصميم سطح المكتب');
    }
});

    


let isFunctionCalled = false; // متغير مؤقت للتحقق مما إذا تم استدعاء الدالة مسبقًا أم لا


function FarbeinTable() {
	const urlParams = new URLSearchParams(window.location.search);
const value = parseInt(urlParams.get('value'));

	if (!isFunctionCalled) {

    	let url;
    	if (value === 1) {
        	url = 'eins203.csv';
    	} else if (value === 2) {
        	url = 'Zwei204.csv';
		}
	   else if (value === 3) {
        	url = 'Drei211.csv';
    	} else if (value === 4) {
        	url = 'vier213.csv';
		} else if (value === 5) {
        	url = 'funf217.csv';
    	} else if (value === 6) {
        	url = 'sechs219.csv';
		} else if (value === 7) {
        	url = 'sieben221.csv';
		}else if (value === 8) {
        	url = 'MP18.csv';
    	
    	} 
	else if (value === 9) {
        	url = 'Prüfung 1.csv';
    	
    	}
		else if (value === 10) {
        	url = 'Prüfung 2.csv';
    	
    	}
		else if (value === 11) {
        	url = 'Prüfung 3.csv';
    	
    	}
		else if (value === 12) {
        	url = 'Pr4.csv';
    	
    	}
		else if (value === 13) {
        	url = 'Pr5.csv';
    	
    	}
		else {
        	url = 'eins203.csv';
    	}
    	if (url) {
        	fetch(url)  	 
             	.then(response => response.text())
        	.then(data => {
            	const parsedData = Papa.parse(data, {
                	delimiter: ",",
                	quoteChar: '"',
                	header: false
            	});
            	const correctAnswers = parsedData.data.slice(1); // استبعاد السطر الأول (الرأس)

            	const tableBody = document.getElementById('table-body');
            	for (let i = 0; i < correctAnswers.length; i++) {
                	const row = correctAnswers[i];
                	const tr = document.createElement('tr');
                	const button = document.createElement('button');
                	button.textContent = row[0]; // قيمة العمود الأول

                   	 
                	const buttons = document.querySelectorAll('button');
                	buttons.forEach(button => {
                    	button.style.backgroundColor = button.dataset.initialBackgroundColor;
                    	button.style.transform = 'scale(1)'; // إعادة تعيين حجم الزر إلى الحجم الأصلي
                    	button.style.boxShadow = 'none'; // إزالة الظل عن الزر
                	});
                	button.addEventListener('click', () => {
						if (document.getElementById("showResults").innerText === "Prüfung abgeben") {
    Shawqi();
  
}


    
                    	currentRow = i + 1; // تحديث الصف الحالي
                    	currentRowIndex = i; // تحديث الفهرس الحالي للصف
                    	displayRow(currentRow);
               	 
                    	Punkte.style.display = "flex";
                    	button.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.5)'; // إضافة ظل للزر
                   	 
                    	// إزالة تأثير التمييز من الأزرار الأخرى
                    	const allButtons = document.querySelectorAll('button');
                    	allButtons.forEach((btn) => {
                        	if (btn !== button) {
                            	btn.style.boxShadow = 'none';
                        	}
                   	 
                    	});
               	 

if (window.getComputedStyle(resultsContainer5).display === "flex" && window.getComputedStyle(buttonContainer).display === "none") {
	resultsContainer5.style.display = "none";
	buttonContainer.style.display = "flex";
	resultsContainer.style.display = "none";
    
    finalResultText.style.display = "none";

    	resultsContainer2.style.display = "none";
    	resultsContainer3.style.display = "none";
    	resultsContainer4.style.display = "none";
    	resultsContainer6.style.display = "none";
    	resultsContainer7.style.display = "none";
    	resultsContainer8.style.display = "none";
    	resultsContainer9.style.display = "none";

   	 document.getElementById("showResults").style.display = "flex";
   	 document.getElementById("showResults").style.width = "100px";


    
    
   	 document.getElementById("showResults").innerText = "Ergebnisse ansehen";

	}

                	});
               	 
               	 
                	// بقية الكود

                	const td = document.createElement('td');
                	td.appendChild(button);
                	tr.appendChild(td);
                	tableBody.appendChild(tr);


                	// تخزين اللون الأصلي للزر
                	button.dataset.initialBackgroundColor = button.style.backgroundColor;

                	// إذا كان لون الزر هو اللون المطلوب وكان في نفس الفهرس، قم بتغيير لونه
                	const computedStyle = getComputedStyle(button);
                	const backgroundColor = computedStyle.backgroundColor;
                	const targetButton = document.querySelector(`tr:nth-child(${i + 1}) button`);
                	if (backgroundColor === 'rgb(255, 255, 3)' && targetButton) {
                    	targetButton.style.backgroundColor = button.style.backgroundColor;
                	}

            	}
       	 
        	})
   	 
        	.catch(error => console.error('Error fetching correct answers CSV file:', error));
   	 
    	// بعد تحميل البيانات وإنشاء الأزرار، ضع العلامة isFunctionCalled إلى القيمة true
    	isFunctionCalled = true;
	}
}
}





// استدعاء الدالة عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', FarbeinTable);


function displayRow(rowNumber) {
    // اكتب هنا السلوك المطلوب عند النقر على الزر
    console.log('تم النقر على الصف رقم:', rowNumber);
}


function displayRow(rowNumber) {
    // تنفيذ السلوك المطلوب عند النقر على الزر
    // يمكنك استخدام rowNumber لتحديد الصفحة المطلوبة لعرضها
    // مثال: window.location.href = 'العنوان الخاص بالصفحة ' + rowNumber;
    console.log('عرض الصفحة رقم:', rowNumber);
}


    function displayCorrespondingRow(rowIndex) {
    // حذف العناصر القديمة في ButtonContainer إذا كانت موجودة
    buttonContainer.innerHTML = '';

    // جلب البيانات للصف المقابل من الجدول الثاني
    const correspondingRowData = correctAnswers[rowIndex];

    // عرض الصف المقابل في ButtonContainer
    correspondingRowData.forEach((column, index) => {
        const button = document.createElement('button');
        button.textContent = column.trim();
        button.addEventListener('click', () => {
            // تنفيذ السلوك الخاص بالزر هنا، على سبيل المثال تغيير لون الزر أو تنفيذ إجراء إضافي
            alert('تم النقر على ' + column.trim());
        });
        buttonContainer.appendChild(button);
    });
}

        let currentRow = 1;
        let liIndex = 0; // تعريف متغير لتتبع معرف العناصر الفريدة
        const buttonContainer = document.getElementById('button-container');
        let correctAnswers = [];
        let list2 = [];
        let currentRowIndex = 0;
       
        // تعريف دالة لإضافة الفهرس إلى list2
        function addIndexToList2(index) {
            list2.push(index);
        }
           
		const urlParams = new URLSearchParams(window.location.search);
    const value = parseInt(urlParams.get('value'));
    
     let url;
	 if (value === 1) {
        	url = 'Lösung203.csv';
    	} else if (value === 2) {
        	url = 'lösung204.csv';
    	} 
		else if (value === 3) {
        	url = 'Lösung211.csv';
    	} else if (value === 4) {
        	url = 'Lösung213.csv';
		} else if (value === 5) {
        	url = 'Lösung217.csv';
    	} else if (value === 6) {
        	url = 'Lösung219.csv';
		} else if (value === 7) {
        	url = 'Lösung221.csv';
		}else if (value === 8) {
        	url = 'MPLös18.csv';
		}
		else if (value === 9) {
        	url = 'LösungPr1.csv';
    	
    	}
		else if (value === 10) {
        	url = 'LösungPr2.csv';
    	
    	}
		else if (value === 11) {
        	url = 'LösungPr3.csv';
    	
    	}
		else if (value === 12) {
        	url = 'LösungPr4.csv';
    	
    	}
		else if (value === 13) {
        	url = 'LösungPr5.csv';
    	
    	}

		else {
        
            url = 'Lösung203.csv';

        }         
		if (url) {
            fetch(url)
		.then(response => response.text())
            .then(data => {
                const parsedData = Papa.parse(data, {
                    delimiter: ",",
                    quoteChar: '"',
                    header: false
                });
                correctAnswers = parsedData.data.slice(1); 
            })
            .catch(error => console.error('Error fetching correct answers CSV file:', error));

		}

// دالة لعرض صف الجدول المحدد
function displayRow(rowNumber) {
    const urlParams = new URLSearchParams(window.location.search);
    const value = parseInt(urlParams.get('value'));
    let url;
    	if (value === 1) {
        	url = 'eins203.csv';
    	} else if (value === 2) {
        	url = 'Zwei204.csv';
		}
	   else if (value === 3) {
        	url = 'Drei211.csv';
    	} else if (value === 4) {
        	url = 'vier213.csv';
		} else if (value === 5) {
        	url = 'funf217.csv';
    	} else if (value === 6) {
        	url = 'sechs219.csv';
		} else if (value === 7) {
        	url = 'sieben221.csv';
		}else if (value === 8) {
        	url = 'MP18.csv';
		}else if (value === 9) {
        	url = 'Prüfung 1.csv';
    	
    	}
		else if (value === 10) {
        	url = 'Prüfung 2.csv';
    	
    	}
		else if (value === 11) {
        	url = 'Prüfung 3.csv';
    	
    	}

		else if (value === 12) {
        	url = 'Pr4.csv';
    	
    	}
		else if (value === 13) {
        	url = 'Pr5.csv';
    	
    	}
    	 else {
        	url = 'eins203.csv';
    	}
		
    if (url) {
            fetch(url)
    
        .then(response => response.text())
        .then(data => {
            const parsedData = Papa.parse(data, {
                delimiter: ",",
                quoteChar: '"',
                header: false
            });
            
            
            
            const rows = parsedData.data;
            const currentRowData = rows[rowNumber - 0]; // لأن الصفوف تبدأ من 0
            buttonContainer.innerHTML = '';

            currentRowData.forEach((column, index) => {
                const labelId = 'label' + ((index + 4) * 10); // بناء معرف العنصر label المقابل لكل زر
                const label = document.getElementById(labelId);
                if (label) { // التأكد من وجود العنصر قبل تعديله
                    label.style.backgroundColor = ''; // إعادة تعيين لون الخلفية للون الافتراضي
                    label.textContent = "nothing";
                }

                if (column.trim() !== '.')  // Ignorieren Sie Zellen mit einem Punkt
					if (column.trim() !== ''){
					const table = document.createElement('table');
                    const tr = document.createElement('tr');
                    const td = document.createElement('td');
                    if (index === 0) {
                        const label = document.createElement('label');
                        label.textContent = column.trim();
                        td.appendChild(label);
                    } else {
                        const button = document.createElement('button');
                        button.textContent = column.trim();
                        button.addEventListener('click', () => {
                            toggleButtonColor(button);
                        });
                        td.appendChild(button);

                        // Hier wird überprüft, ob die Hintergrundfarbe des Buttons in FarbeinTable geändert werden soll
                    }
                    tr.appendChild(td);
                    table.appendChild(tr);
                    buttonContainer.appendChild(table);

                    const emptyRow = document.createElement('div');
                    emptyRow.style.height = '0px';
                    buttonContainer.appendChild(emptyRow);
                    if (index === 0) {
                        table.style.backgroundColor = '#ccc';
                    }
                }
            });

            // تحديث المتغير currentRow
            currentRow = rowNumber;

            // تحديث عناصر الصفحة الأخرى
            updatePageElements(rowNumber);
        })
        .catch(error => console.error('Error fetching CSV file:', error));
}

}





// تحديث عناصر الصفحة الأخرى
function updatePageElements(rowNumber) {


   
	
    // تحديث المتغير currentRowIndex
    currentRowIndex = rowNumber - 1;

    // Aktualisieren der aktuellen Frage Nummer
    const questionNumber = rowNumber + 0;

    // Anzeigen der Frage Nummer in labelIndex
    document.getElementById('labelIndex').textContent = ` ${questionNumber}`;
    document.getElementById('label1').textContent = ``;

    // Aktualisieren des Seiten Titels basierend auf der Frage Nummer
    let pageTitle;
    if (questionNumber >= 1 && questionNumber <= 4) {
        pageTitle = "Recht der öffentlichen Sicherheit und Ordnung";
       document.getElementById('Punkte').innerText = '(2 Punkte)';
       
    } else if (questionNumber >= 5 && questionNumber <= 8) {
        pageTitle = "Gewerberecht";
       document.getElementById('Punkte').innerText = '(1 Punkte)';
       
    } else if (questionNumber >= 9 && questionNumber <= 12) {
        pageTitle = "Datenschutz";
        document.getElementById('Punkte').innerText = '(1 Punkte)';
        
    } else if (questionNumber >= 13 && questionNumber <= 24) {
        pageTitle = "Bürgliches Gesetzbuch";
        document.getElementById('Punkte').innerText = '(2 Punkte)';
        
    } else if (questionNumber >= 25 && questionNumber <= 36) {
        pageTitle = "Strafgesetzbuch";
       document.getElementById('Punkte').innerText = '(2 Punkte)';
       
    } else if (questionNumber >= 37 && questionNumber <= 44) {
        pageTitle = "Unfallverhütungsvorschriften";
       document.getElementById('Punkte').innerText = '(1 Punkte)';
       
    } else if (questionNumber >= 45 && questionNumber <= 48) {
        pageTitle = "Waffenrecht";
       document.getElementById('Punkte').innerText = '(1 Punkte)';
       
    } else if (questionNumber >= 49 && questionNumber <= 64) {
        pageTitle = "Umgang mit Menschen";
       document.getElementById('Punkte').innerText = '(1 Punkte)';
       
    } else if (questionNumber >= 65 && questionNumber <= 72) {
        pageTitle = "Sicherheitstechnik";
       document.getElementById('Punkte').innerText = '(1 Punkte)';
    } else {
        // Im Falle keiner Übereinstimmung mit den Bedingungen
        pageTitle = "Ergebnisse";
    }

    // Ändern des Seitentitels
    document.title = pageTitle;

    // Aktualisieren der title-bar mit den Buttons
    document.getElementById('title-bar').innerHTML = `<h1>${pageTitle}</h1>`

    // Anzeigen oder Ausblenden der vorherigen und nächsten Buttons basierend auf der Frage Nummer
    if (questionNumber === 1) {
        document.getElementById('back').style.display = 'none'; // Verstecken Sie die Zurück-Taste
    } else if (questionNumber === 72) {
        document.getElementById('next').style.display = 'none'; // Verstecken Sie die Nächste-Taste
    } else {
        // Wenn die Frage im Bereich von 2 bis 71 liegt, können Sie die Buttons wieder anzeigen
        document.getElementById('back').style.display = 'block';
        document.getElementById('next').style.display = 'block';
    }

    // Nach Anzeige der neuen Frage, führen Sie die checkTextMatch Funktion aus
    checkTextMatch();
    

    // Hinzufügen des Index zur Liste 2
    addIndexToList2(rowNumber);
    
    Shawqi();
    

 const labelIndex = parseInt(document.getElementById('labelIndex').textContent);

// استخدم الفهرس لتحديد الزر المرتبط به في الجدول الآخر
const tableBody = document.getElementById('table-body');
const targetButton = tableBody.querySelector(`tr:nth-child(${labelIndex + 0}) button`);

var resultsContainer5 = document.getElementById("resultsContainer5");
var buttonContainer = document.getElementById("button-container");

if (resultsContainer5.style.display === "none" || buttonContainer.style.display === "flex") {
    checkAnswers(); // استدعاء الدالة checkAnswers()
    
    if (targetButton) {   
        targetButton.style.backgroundColor = label1.style.color;
    } 

    // استدعاء أي وظائف إضافية هنا
    FarbeinTable();
}

}


// استدعاء الدالة عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', () => {
    displayRow(1); // عرض الصف الأول عند تحميل الصفحة
});


// تعريف دالة لتبديل لون الزر
function toggleButtonColor(button) {
    // كود لتبديل لون الزر هنا
}

// تعريف دالة لإضافة الفهرس إلى list2
function addIndexToList2(index) {
    // كود لإضافة الفهرس إلى list2 هنا
}


function toggleButtonColor(button) {
    const table = button.closest('table');
    if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
        button.style.color = '#ffffff';
        button.style.backgroundColor = '#0603aa';
        table.style.backgroundColor = '#0603aa';
    } else {
        button.style.color = 'rgb(2, 0, 0)';
        button.style.backgroundColor = 'rgb(255, 255, 3)';
        table.style.backgroundColor = 'rgb(255, 255, 3)';
    }
    
    // Check if the button is the first button in the button-container
    const buttons = document.querySelectorAll('#button-container button');
    if (button === buttons[0]) {
        const label40 = document.getElementById('label40');
        label40.style.backgroundColor = button.style.backgroundColor;

    }
    
    if (button === buttons[1]) {
        const label50 = document.getElementById('label50');
        label50.style.backgroundColor = button.style.backgroundColor;
    }
    
    if (button === buttons[2]) {
        const label60 = document.getElementById('label60');
        label60.style.backgroundColor = button.style.backgroundColor;
    }

    if (button === buttons[3]) {
        const label70 = document.getElementById('label70');
        label70.style.backgroundColor = button.style.backgroundColor;
    }

    if (button === buttons[4]) {
        const label80 = document.getElementById('label80');
        label80.style.backgroundColor = button.style.backgroundColor;
    }

    if (table.style.backgroundColor === 'rgb(255, 255, 3)') {
        const ButtonText = button.textContent;
        const listItems = document.getElementById('list').textContent.trim();
        if (!listItems.includes(ButtonText)) {
            const li = document.createElement('li');
            li.textContent = ButtonText;
            li.id = `listItem${liIndex++}`; // Assign a unique ID to each <li> element
            document.getElementById('list').appendChild(li);
            checkTextMatch();
            FarbeinTable();
        }
    }

    const computedStyle = getComputedStyle(button);
    const backgroundColor = computedStyle.backgroundColor;
    if (backgroundColor === 'rgb(6, 3, 170)') {
        const list = document.getElementById('list');
        const buttonText = button.textContent; // Extract the button text
        const listItemToRemove = Array.from(list.children).find(item => item.textContent === buttonText); // Search for the item to remove based on its text
        if (listItemToRemove) {
            listItemToRemove.remove(); // Remove the item from the list if found
            liIndex--; // Update the index for subsequent items
        }
    }


   // احصل على قيمة الفهرس من العنصر HTML
const labelIndex = parseInt(document.getElementById('labelIndex').textContent);

// استخدم الفهرس لتحديد الزر المرتبط به في الجدول الآخر
const tableBody = document.getElementById('table-body');
const targetButton = tableBody.querySelector(`tr:nth-child(${labelIndex + 0}) button`);

if (targetButton) {
    // قم بتغيير اللون أو أي عملية أخرى حسب الحالة
    if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
        targetButton.style.backgroundColor = button.style.backgroundColor;
    } else {
        targetButton.style.backgroundColor = '';
    }

    // استدعاء أي وظائف إضافية هنا
    FarbeinTable();
}

}


function checkTextMatch() {
    const buttons = document.querySelectorAll('#button-container button');
    const listItems = document.getElementById('list').textContent.trim();

    buttons.forEach(button => {
        const buttonText = button.textContent.trim();

        // التحقق من مطابقة النصوص وتغيير الألوان بناءً على ذلك
        if (listItems.includes(buttonText)) {
            button.style.backgroundColor = 'rgb(255, 255, 3)';
            button.style.color = '#000'; // تغيير لون النص لزيادة وضوحه
        } else {
            button.style.backgroundColor = '#0603aa';
            button.style.color = '#fff'; // إعادة لون النص للون الأصلي
        }

        const table = button.closest('table'); // تحديد الجدول المرتبط بالزر
        if (table) {
            // تغيير لون الجدول بناءً على حالة الزر
            if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
                table.style.backgroundColor = 'rgb(255, 255, 3)';
            } else {
                table.style.backgroundColor = '#0603aa';
            }
        }

        // تحديد الزر في الجدول وتغيير لونه بناءً على حالة الزر
        if (button === buttons[0]) {
        const label40 = document.getElementById('label40');
        label40.style.backgroundColor = button.style.backgroundColor;

    }
    
    if (button === buttons[1]) {
        const label50 = document.getElementById('label50');
        label50.style.backgroundColor = button.style.backgroundColor;
    }
    
    if (button === buttons[2]) {
        const label60 = document.getElementById('label60');
        label60.style.backgroundColor = button.style.backgroundColor;
    }

    if (button === buttons[3]) {
        const label70 = document.getElementById('label70');
        label70.style.backgroundColor = button.style.backgroundColor;
    }

    if (button === buttons[4]) {
        const label80 = document.getElementById('label80');
        label80.style.backgroundColor = button.style.backgroundColor;
    }


    });
}




        // عرض السؤال الأول عند بداية التحميل
        displayRow(currentRow);
        
        


        document.getElementById('next').addEventListener('click', () => {
        
       Shawqi();
    const labelIndex = parseInt(document.getElementById('labelIndex').textContent);
    const nextLabelIndex = labelIndex + 1;


    // هنا يمكنك استخدام nextLabelIndex لجلب السؤال التالي وعرضه
    displayRow(nextLabelIndex);
    currentRow = nextLabelIndex;

});




        document.getElementById('back').addEventListener('click', () => {
        
        Shawqi();
    // التأكد من أن الصف الحالي أكبر من 1 قبل الانتقال للخلف
    
        const labelIndex = parseInt(document.getElementById('labelIndex').textContent);
        const previousLabelIndex = labelIndex - 1;
        // استخدام previousLabelIndex لجلب السؤال السابق وعرضه
        displayRow(previousLabelIndex);
        // تحديث الصف الحالي بعد الانتقال للخلف
        currentRow = previousLabelIndex;
    
});



const buttons = document.querySelectorAll('#button-container button');
buttons.forEach((button, index) => {
    const answer = button.textContent.trim();
    const correctAnswer = correctAnswers[currentRow - 1][index];

    if (!correctAnswer) {
        if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
            button.style.backgroundColor = 'red';
            if (button === buttons[0]) {
            const label40 = document.getElementById('label40');
            document.getElementById('label40').innerText = '0';

        }
        }
    } else {
        button.style.backgroundColor = 'green';
        const ButtonText = button.textContent;
        document.getElementById('label1').textContent = answer + ', '; 

        if (button === buttons[0]) {
            const label40 = document.getElementById('label40');
            document.getElementById('label40').innerText = '1';
    }
}
    const table = button.closest('table'); 
    if (table.style.backgroundColor === 'rgb(255, 255, 3)') {
        const ButtonText = button.textContent;
        document.getElementById('list').innerHTML += `<li id="${button.id}">${ButtonText}</li>`; // تعيين معرف فريد لكل عنصر <li>
    }
});

        

function checkAnswers() {
	document.getElementById("label1").display = "flex";

    
	var label1 = document.getElementById("label1");
	label1.style.display = "flex";
    const buttons_Answers = document.querySelectorAll('#button-container button');
    buttons_Answers.forEach(button => {
        button.disabled = true;
    });

    if (correctAnswers.length === 0) {
        alert('Seite wird geladen. Bitte warten...');
        return;
    }

    let answerCorrect = true; // تفترض الإجابة الصحيحة في البداية

    const buttons = document.querySelectorAll('#button-container button');
    buttons.forEach((button, index) => {
        const answer = button.textContent.trim();
        const correctAnswer = correctAnswers[currentRow - 1][index];
        const table = button.closest('table');

        // التحقق من صحة الإجابة وتحديد لون الزر والنص في الوسم
        if (!correctAnswer) {
            if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
                button.style.backgroundColor = 'red';
                answerCorrect = false; // إذا كان هناك زر لونه أحمر فإن الإجابة خاطئة
            }


        } else {
            button.style.backgroundColor = 'green';
            document.getElementById('label1').textContent = answer + ', ';

            // إذا كانت الإجابة صحيحة، أضف الفهرس (index) إلى list2
        }

        // التحقق من لون خلفية الجدول وتحديد صحة الإجابة بناءً على ذلك
        if (button.style.backgroundColor === 'green' && (!table || table.style.backgroundColor !== 'rgb(255, 255, 3)')) {
            answerCorrect = false;
        }
    });
    const currentCorrectAnswers = correctAnswers[currentRowIndex - 1];

    // تعيين النص بناءً على صحة الإجابة
    if (answerCorrect) {
    document.getElementById('label1').innerText = 'Richtig beantwortet!';
    document.getElementById('label1').style.color = 'green';

    

    const list2Element = document.getElementById('list2');
    const questionNumber = parseInt(document.getElementById('labelIndex').textContent.split(" ")[1]);
    const listItems = list2Element.textContent.trim();
    
   if (!listItems.includes(questionNumber.toString())) { // تأكد من عدم وجود العنصر في القائمة بالفعل
    const li = document.createElement('li');
    li.textContent = questionNumber;
    list2Element.appendChild(li);
}



} else {
    document.getElementById('label1').innerText = 'Falsch beantwortet!';
    document.getElementById('label1').style.color = 'red';

    const list2Element = document.getElementById('list2');
    const questionNumber = parseInt(document.getElementById('labelIndex').textContent.split(" ")[1]);
    const listItems = list2Element.textContent.trim();
    
    if (listItems.includes(questionNumber.toString())) { // تحقق مما إذا كان العنصر موجودًا في الفهرس
        const listItemToRemove = Array.from(list2Element.children).find(item => item.textContent === questionNumber.toString()); // البحث عن العنصر المراد حذفه بناء على النص
        if (listItemToRemove) {
            listItemToRemove.remove(); // حذف العنصر من القائمة إذا تم العثور عليه
            liIndex--;  // إزالة العنصر من الفهرس
        }
    }
}
}

document.getElementById('checkAnswers').addEventListener('click', checkAnswers);


document.getElementById('listenButton').addEventListener('click', () => {
    const listenButton = document.getElementById('listenButton');
    if (listenButton.innerText === 'Hören') {
        listenButton.innerText = 'Stop';

        // بدء النطق
        adjustSpeechRate('male', 1.0);
    } else {
        listenButton.innerText = 'Hören';

        // إيقاف النطق
        window.speechSynthesis.cancel();
    }
});

function adjustSpeechRate(gender, speed) {
    // كود إعداد النص للنطق
    const buttons = document.querySelectorAll('#button-container label, #button-container button');
    let textToSpeak = '';
    buttons.forEach(button => {
        textToSpeak += button.textContent.trim() + '. ';
    });

    // إنشاء كائن النطق
    const speechSynthesis = window.speechSynthesis;
    const utterance = new SpeechSynthesisUtterance(textToSpeak);
    utterance.lang = 'de-DE';

    // تعيين السرعة والصوت
    if (gender === 'male') {
        utterance.pitch = 0.0; // قد يختلف هذا الرقم حسب المتصفح
    } else if (gender === 'female') {
        utterance.pitch = 3.0; // قد يختلف هذا الرقم حسب المتصفح
    }

    // تعيين سرعة النطق
    utterance.rate = speed; // القيمة الافتراضية هي 1.0

    // بدء النطق
    speechSynthesis.speak(utterance);}
    
    function showResults() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [1, 2, 3, 4].includes(item));
    const count = selectedNumbers.length;
    const value = count > 4 ? 8 : count * 2;

    document.getElementById('subjectTitle').textContent = ` Recht der öffentlichen Sicherheit und Ordnung (${value} von 8)`;
    const percentage = value > 0 ? (value / 8) * 100 : 0;
    document.getElementById('progressBar').style.width = `${percentage}%`;
    document.getElementById('percentage').textContent = `${percentage}%`;
	document.getElementById('percentage').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية

    document.getElementById('progressBar').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط
    
    return value; // إرجاع القيمة لحساب المتوسط
}

function showResults2() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [5, 6, 7, 8].includes(item));
    const count = selectedNumbers.length;
    const value2 = count > 4 ? 8 : count * 1;

    document.getElementById('subjectTitle2').textContent = ` Gewerberecht (${value2} von 4)`;
    const percentage = (value2 / 4) * 100; // تصحيح الخطأ هنا
    document.getElementById('progressBar2').style.width = `${percentage}%`;
    document.getElementById('percentage2').textContent = `${percentage}%`;
	document.getElementById('percentage2').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية

    document.getElementById('progressBar2').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط
    return value2; 
}


function showResults3() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [9, 10, 11, 12].includes(item));
    const count = selectedNumbers.length;
    const value3 = count > 4 ? 8 : count * 1;

    document.getElementById('subjectTitle3').textContent = ` Datenschutz (${value3} von 4)`;
    const percentage = (value3 / 4) * 100;
    document.getElementById('progressBar3').style.width = `${percentage}%`;
    document.getElementById('percentage3').textContent = `${percentage}%`;
	document.getElementById('percentage3').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية

    document.getElementById('progressBar3').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط
    return value3; 
}

function showResults4() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24].includes(item));
    const count = selectedNumbers.length;
    const value4 = count > 12 ? 24 : count * 2;

    document.getElementById('subjectTitle4').textContent = `Bürgliches Gesetzbuch (${value4} von 24)`;
    const percentage = (value4 / 24) * 100;
    document.getElementById('progressBar4').style.width = `${percentage}%`;
    document.getElementById('percentage4').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية
    document.getElementById('progressBar4').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط
    return value4; 
}


function showResults5() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36].includes(item));
    const count = selectedNumbers.length;
    const value5 = count > 12 ? 24 : count * 2;

    document.getElementById('subjectTitle5').textContent = `Strafgesetzbuch (${value5} von 24)`;
    const percentage = (value5 / 24) * 100;
    document.getElementById('progressBar5').style.width = `${percentage}%`;
    document.getElementById('percentage5').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية
    document.getElementById('progressBar5').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط
    return value5; 
}

function showResults6() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [37, 38, 39, 40, 41, 42, 43, 44].includes(item));
    const count = selectedNumbers.length;
    const value6 = count > 4 ? 8 : count * 1;

    document.getElementById('subjectTitle6').textContent = ` Unfallverhütungsvorschriften (${value6} von 8)`;
    const percentage = (value6 / 8) * 100;
    document.getElementById('progressBar6').style.width = `${percentage}%`;
    document.getElementById('percentage6').textContent = `${percentage}%`;
	document.getElementById('percentage6').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية

    document.getElementById('progressBar6').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط
    return value6; 
}

function showResults7() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [45, 46, 47, 48].includes(item));
    const count = selectedNumbers.length;
    const value7 = count > 2 ? 4 : count * 1;

    document.getElementById('subjectTitle7').textContent = ` Waffenrecht (${value7} von 4)`;
    const percentage = (value7 / 4) * 100;
    document.getElementById('progressBar7').style.width = `${percentage}%`;
    document.getElementById('percentage7').textContent = `${percentage}%`;
	document.getElementById('percentage7').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية

    document.getElementById('progressBar7').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط
    return value7; 
}

function showResults8() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64].includes(item));
    const count = selectedNumbers.length;
    const value8 = count > 8 ? 16 : count * 1; // تعريف المتغير value8 كمتغير محلي لهذه الدالة

    document.getElementById('subjectTitle8').textContent = ` Umgang mit Menschen (${value8} von 16)`;
    const percentage = (value8 / 16) * 100;
    document.getElementById('progressBar8').style.width = `${percentage}%`;
    document.getElementById('percentage8').textContent = `${percentage}%`;
	document.getElementById('percentage8').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أر��ام عشرية

    document.getElementById('progressBar8').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط

    return value8; // إرجاع قيمة value8
}

function showResults9() {
    const itemsFromList2 = Array.from(document.getElementById('list2').children).map(item => parseInt(item.textContent));
    const selectedNumbers = itemsFromList2.filter(item => [65, 66, 67, 68, 69, 70, 71, 72].includes(item));
    const count = selectedNumbers.length;
    const value9 = count > 4 ? 8 : count * 1; // تعريف المتغير value9 كمتغير محلي لهذه الدالة

    document.getElementById('subjectTitle9').textContent = ` Sicherheitstechnik (${value9} von 8)`;
    const percentage = (value9 / 8) * 100;
    document.getElementById('progressBar9').style.width = `${percentage}%`;
    document.getElementById('percentage9').textContent = `${percentage}%`;
	document.getElementById('percentage9').textContent = `${percentage.toFixed(0)}%`; // تحويل النسبة إلى صيغة عادية بدون أرقام عشرية

    document.getElementById('progressBar9').style.backgroundColor = percentage < 50 ? 'red' : 'green'; // تغيير لون الشريط

    return value9; // إرجاع قيمة value9
}

const totalAverage = (showResults() + showResults2() + showResults3() + showResults4() + showResults5() + showResults6() + showResults7()+ showResults8()+ showResults9());
console.log("المتوسط العام:", totalAverage);


function hideResultsDisplay() {

	var resultsContainer = document.getElementById("resultsContainer");
	resultsContainer.style.display = "flex";

	var resultsContainer2 = document.getElementById("resultsContainer2");
	resultsContainer2.style.display = "flex";

	var resultsContainer3 = document.getElementById("resultsContainer3");
	resultsContainer3.style.display = "flex";

	var resultsContainer4 = document.getElementById("resultsContainer4");
	resultsContainer4.style.display = "flex";

	var resultsContainer5 = document.getElementById("resultsContainer5");
	resultsContainer5.style.display = "flex";

    var resultsContainer6 = document.getElementById("resultsContainer6");

	resultsContainer6.style.display = "flex";

    var resultsContainer7 = document.getElementById("resultsContainer7");

	resultsContainer7.style.display = "flex";

    var resultsContainer8 = document.getElementById("resultsContainer8");

	resultsContainer8.style.display = "flex";

    var resultsContainer9 = document.getElementById("resultsContainer9");

	resultsContainer9.style.display = "flex";

    var next = document.getElementById("next");
    next.style.display = "none";

    var back = document.getElementById("back");
    back.style.display = "none";


    var showResults = document.getElementById("showResults");
    showResults.style.display = "none";

    var checkAnswers = document.getElementById("checkAnswers");
    checkAnswers.style.display = "none";
    var listenButton = document.getElementById("listenButton");
    listenButton.style.display = "none";
 
	


	var buttonContainer = document.getElementById("button-container");
	buttonContainer.style.display = "none"; // إظهار عنصر الأزرار


}


document.querySelector('#showResults').addEventListener('click', () => {
	if (document.getElementById("showResults").innerText === "Prüfung abgeben") {
    Shawqi();
  
}
    
  Punkte.style.display = "none";
 
	var listenButton = document.getElementById("listenButton");

	if (document.getElementById('showResults').innerHTML == "Prüfung abgeben") {

        const confirmation = confirm("Möchtest du wirklich den Test beenden und deine Ergebnisse sehen?");
        
        // التحقق من رد المستخدم
        if (confirmation) {
            // قم بتنفيذ الأوامر
            executeResults();
        }
    } else {
        // إذا كان مخفيًا، قم بتنفيذ الأوامر مباشرة
        executeResults();
    }
});

// دالة لتنفيذ الأوامر المشتركة في كلتا الحالتين
function executeResults() {
    hideResultsDisplay();
    showResults();
    showResults2();
    showResults3();
    showResults4();
    showResults5();
    showResults6();
    showResults7();
    showResults8();
    showResults9();
    activateFinalResult();
    AlleFarben();
    pageTitle = "Ergebnisse";
    document.getElementById('title-bar').innerHTML = `<h1>${pageTitle}</h1>`;
    var label1 = document.getElementById("label1");
    label1.style.display = "none";

    const currentTime = new Date().getTime();
    const elapsedTime = startTime - currentTime;
    const totalDuration = 120 * 60 * 1000;
    const elapsedMinutes = Math.floor((elapsedTime % totalDuration) / (1000 * 60));
    const elapsedSeconds = Math.floor((elapsedTime % (1000 * 60)) / 1000);
    document.getElementById('countdown-timer').innerText = `Zeit verbraucht: ${elapsedMinutes} Minuten ${elapsedSeconds} Sekunden`;
}





function activateFinalResult() {
    const totalPercentage  = (showResults() + showResults2() + showResults3() + showResults4() + showResults5() + showResults6() + showResults7()+ showResults8()+ showResults9());
;
    const finalResultText = document.getElementById('finalResultText');
    if (isNaN(totalPercentage)) {
        finalResultText.textContent = "Leider nicht Bestanden";
        finalResultText.style.color = "red";
        finalResultText.style.fontWeight = "bold";
    } else if (totalPercentage < 50) {
        finalResultText.innerHTML = `<p><strong>Ergebnis</strong>; <span style="color: rgb(226, 80, 65); font-size: 22px;">NICHT BESTANDEN</span><br><strong>Gesamtpunkte: &quot;<span style="font-size: 22px;">${totalPercentage}</span>&quot; Punkte</strong></p>`;

    } else {
		finalResultText.innerHTML = `<p><strong>Ergebnis:</strong>&nbsp; <strong><span style="font-size: 22px; color: rgb(97, 189, 109);">BESTANDEN</span></strong></p>
<p><strong>Gesamtpunkte: </strong><span style="font-size: 22px;">${totalPercentage}</span> Punkte erreicht</p>`;

    }
    finalResultText.style.display = "block";
}





document.getElementById('Pro').addEventListener('click', () => {
	const buttons_Answers = document.querySelectorAll('#button-container button');
	buttons_Answers.forEach(button => {
    	button.disabled = true;
	});

	if (correctAnswers.length === 0) {
    	alert('Seite wird geladen. Bitte warten....');
    	return;
	}

	let answerCorrect = true; // تفترض الإجابة الصحيحة في البداية

	const buttons = document.querySelectorAll('#button-container button');
	buttons.forEach((button, index) => {
    	const answer = button.textContent.trim();
    	const correctAnswer = correctAnswers[currentRow - 1][index];
    	const table = button.closest('table');

if (correctAnswer || !correctAnswer) {
	const labelIndex = parseInt(document.getElementById('labelIndex').textContent);
	const tableBody = document.getElementById('table-body');
	const targetButton = tableBody.querySelector(`tr:nth-child(${labelIndex + 0}) button`);

	if (button.style.backgroundColor == 'rgb(255, 255, 3)') {
    	targetButton.style.backgroundColor = 'rgb(255, 255, 3)';
    	FarbeinTable();
	}
}



    	// التحقق من صحة الإجابة وتحديد لون الزر والنص في الوسم
    	if (!correctAnswer) {
	if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
    	answerCorrect = false;
    	if (button === buttons[0]) {
        	const label40 = document.getElementById('label40');
        	label40.textContent = 0;
    	}
    	if (button === buttons[1]) {
        	const label50 = document.getElementById('label50');
        	label50.textContent = 0;
    	}
    	if (button === buttons[2]) {
        	const label60 = document.getElementById('label60');
        	label60.textContent = 0;
    	}
    	if (button === buttons[3]) {
        	const label70 = document.getElementById('label70');
        	label70.textContent = 0;
    	}
    	if (button === buttons[4]) {
        	const label80 = document.getElementById('label80');
        	label80.textContent = 0;
    	}
	}
} else {
	document.getElementById('label1').textContent = answer + ', ';
	if (button === buttons[0]) {
    	const label40 = document.getElementById('label40');
    	label40.textContent = 1;
	}
	if (button === buttons[1]) {
    	const label50 = document.getElementById('label50');
    	label50.textContent = 1;
	}
	if (button === buttons[2]) {
    	const label60 = document.getElementById('label60');
    	label60.textContent = 1;
	}
	if (button === buttons[3]) {
    	const label70 = document.getElementById('label70');
    	label70.textContent = 1;
	}
	if (button === buttons[4]) {
    	const label80 = document.getElementById('label80');
    	label80.textContent = 1;
	}
}



if ((label40.textContent === '1' && label40.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label50.textContent === '1' && label50.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label60.textContent === '1' && label60.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label70.textContent === '1' && label70.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label80.textContent === '1' && label80.style.backgroundColor !== 'rgb(255, 255, 3)')) {
	answerCorrect = false;
}


	});
	const currentCorrectAnswers = correctAnswers[currentRowIndex - 1];

	// تعيين النص بناءً على صحة الإجابة
	if (answerCorrect) {
	document.getElementById('label1').innerText = 'Richtig beantwortet!';
	document.getElementById('label1').style.color = 'green';

	const list2Element = document.getElementById('list2');
	const questionNumber = parseInt(document.getElementById('labelIndex').textContent.split(" ")[1]);
	const listItems = list2Element.textContent.trim();
    
	if (!listItems.includes(questionNumber.toString())) { // تأكد من عدم وجود العنصر في القائمة بالفعل
    	const li = document.createElement('li');
    	li.textContent = questionNumber;
    	list2Element.appendChild(li);
	}
} else {
	document.getElementById('label1').innerText = 'Falsch beantwortet!';
	document.getElementById('label1').style.color = 'red';

	const list2Element = document.getElementById('list2');
	const questionNumber = parseInt(document.getElementById('labelIndex').textContent.split(" ")[1]);
	const listItems = list2Element.textContent.trim();
    
    
   
	if (listItems.includes(questionNumber.toString())) { // تحقق مما إذا كان العنصر موجودًا في الفهرس
    	const listItemToRemove = Array.from(list2Element.children).find(item => item.textContent === questionNumber.toString()); // البحث عن العنصر المراد حذفه بناء على النص
    	if (listItemToRemove) {
        	listItemToRemove.remove(); // حذف العنصر من القائمة إذا تم العثور عليه
        	liIndex--;  // إزالة العنصر من الفهرس
    	}
	}
}

});


   function AlleFarben()  {
	const list2Items = document.getElementById('list2').getElementsByTagName('li');

	// تحديد أزرار الجدول
	const tableButtons = document.querySelectorAll('#table-body button');

	// الاستمرار في فحص كل زر في الجدول
	tableButtons.forEach((button, index) => {
    	let found = false; // مؤشر للتحقق مما إذا كان العنصر موجودًا في list2 أم لا
    	for (let i = 0; i < list2Items.length; i++) {
        	const listItemText = parseInt(list2Items[i].textContent);
        	if (listItemText === index + 1) { // +1 لأن list2 يبدأ من 1 و index يبدأ من 0
            	found = true;
            	break;
        	}
    	}
    	// تغيير لون الزر بناءً على العثور على العنصر في list2
    	if (found) {
        	button.style.backgroundColor = 'green'; // لون الزر الأخضر لوجود العنصر في list2
    	} else {
        	button.style.backgroundColor = 'red'; // لون الزر الأحمر لعدم وجود العنصر في list2
    	}
    
	});
}


function Shawqi() {


	document.getElementById("label1").style.display = "none";
	const listenButton = document.getElementById('listenButton');
    if (listenButton.innerText === 'Stop') {
        listenButton.innerText = 'Hören';

        // بدء النطق
        adjustSpeechRate('male', 1.0);
    } else {
        listenButton.innerText = 'Hören';

        // إيقاف النطق
        window.speechSynthesis.cancel();
    }
    
	if (correctAnswers.length === 0) {
    	alert('Seite wird geladen. Bitte warten...');
    	return;
	}

	let answerCorrect = true; // تفترض الإجابة الصحيحة في البداية

	const buttons = document.querySelectorAll('#button-container button');
	buttons.forEach((button, index) => {
    	const answer = button.textContent.trim();
    	const correctAnswer = correctAnswers[currentRow - 1][index];
    	const table = button.closest('table');

if (correctAnswer || !correctAnswer) {
	const labelIndex = parseInt(document.getElementById('labelIndex').textContent);
	const tableBody = document.getElementById('table-body');
	const targetButton = tableBody.querySelector(`tr:nth-child(${labelIndex + 0}) button`);

	if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
        targetButton.style.backgroundColor = button.style.backgroundColor;
    } 
}



    	// التحقق من صحة الإجابة وتحديد لون الزر والنص في الوسم
    	if (!correctAnswer) {
	if (button.style.backgroundColor === 'rgb(255, 255, 3)') {
    	answerCorrect = false;
    	if (button === buttons[0]) {
        	const label40 = document.getElementById('label40');
        	label40.textContent = 0;
    	}
    	if (button === buttons[1]) {
        	const label50 = document.getElementById('label50');
        	label50.textContent = 0;
    	}
    	if (button === buttons[2]) {
        	const label60 = document.getElementById('label60');
        	label60.textContent = 0;
    	}
    	if (button === buttons[3]) {
        	const label70 = document.getElementById('label70');
        	label70.textContent = 0;
    	}
    	if (button === buttons[4]) {
        	const label80 = document.getElementById('label80');
        	label80.textContent = 0;
    	}
	}
} else {
	document.getElementById('label1').textContent = answer + ', ';
	if (button === buttons[0]) {
    	const label40 = document.getElementById('label40');
    	label40.textContent = 1;
	}
	if (button === buttons[1]) {
    	const label50 = document.getElementById('label50');
    	label50.textContent = 1;
	}
	if (button === buttons[2]) {
    	const label60 = document.getElementById('label60');
    	label60.textContent = 1;
	}
	if (button === buttons[3]) {
    	const label70 = document.getElementById('label70');
    	label70.textContent = 1;
	}
	if (button === buttons[4]) {
    	const label80 = document.getElementById('label80');
    	label80.textContent = 1;
	}
}



if ((label40.textContent === '1' && label40.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label50.textContent === '1' && label50.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label60.textContent === '1' && label60.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label70.textContent === '1' && label70.style.backgroundColor !== 'rgb(255, 255, 3)') ||
	(label80.textContent === '1' && label80.style.backgroundColor !== 'rgb(255, 255, 3)')) {
	answerCorrect = false;
}


	});
	const currentCorrectAnswers = correctAnswers[currentRowIndex - 1];

	// تعيين النص بناءً على صحة الإجابة
	if (answerCorrect) {
	document.getElementById('label1').innerText = 'Richtig beantwortet!';
	document.getElementById('label1').style.color = 'green';

	const list2Element = document.getElementById('list2');
	const questionNumber = parseInt(document.getElementById('labelIndex').textContent.split(" ")[1]);
	const listItems = list2Element.innerText.trim();
    
	if (!listItems.includes(questionNumber.toString())) { // تأكد من عدم وجود العنصر في القائمة بالفعل
    	const li = document.createElement('li');
    	li.textContent = questionNumber;
    	list2Element.appendChild(li);
	}
} else {
	document.getElementById('label1').innerText = 'Falsch beantwortet!';
	document.getElementById('label1').style.color = 'red';

	const list2Element = document.getElementById('list2');
	const questionNumber = parseInt(document.getElementById('labelIndex').textContent.split(" ")[1]);
	const listItems = list2Element.innerText.trim();
    
    
   
	if (listItems.includes(questionNumber.toString())) { // تحقق مما إذا كان العنصر موجودًا في الفهرس
    	const listItemToRemove = Array.from(list2Element.children).find(item => item.textContent === questionNumber.toString()); // البحث عن العنصر المراد حذفه بناء على النص
    	if (listItemToRemove) {
        	listItemToRemove.remove(); // حذف العنصر من القائمة إذا تم العثور عليه
        	liIndex--;  // إزالة العنصر من الفهرس
    	}
	}
}



}
const startTime = new Date().getTime();
const duration = 120 * 60 * 1000; // 120 دقيقة محولة إلى ميلي ثانية
const endTime = startTime + duration; // تحديد وقت الانتهاء

// دالة عرض الوقت المتبقي
function displayCountdown(minutes, seconds) {
    if (listenButton.style.display === "") {
        document.getElementById('countdown-timer').textContent = `Verbleibende Zeit: ${minutes} Minuten ${seconds} Sekunden`;
    }
}



// بدء العد التنازلي
const countdownInterval = setInterval(() => {
	const currentTime = new Date().getTime();
	const remainingTime = endTime - currentTime;

	// تحويل الوقت المتبقي إلى دقائق وثواني
	const minutes = Math.floor((remainingTime % (1000 * 60 * 120)) / (1000 * 60));
	const seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

	// عرض الوقت المتبقي
	displayCountdown(minutes, seconds);

	// عند انتهاء الوقت
	if (remainingTime <= 0) {
    	clearInterval(countdownInterval); // توقف العد التنازلي
    	console.log("Die Zeit ist abgelaufen!"); // أداء الإجراء المطلوب عند انتهاء الوقت
	}
}, 1000); // يتم تحديث العد كل ثانية




	</script>
</body>
</html>












